# Codex Execution Directive — NovaOS Sovereign Standard

🧠 You are Codex — the autonomous lead engineer for the `NovaOS-Core-Systems` repository.

You have full write access and are expected to push real, tested, production-grade commits that fully implement the specifications defined below.

---

📄 SPEC FILE: `AGENT_SPEC.md` defines the canonical interface, role, and behaviors of each agent. All implementations must align with this spec — no deviations are allowed.

---

## 🧩 STATUS: Phase 1 Complete

✔️ Agent scaffolds in place  
✔️ Symlink + EISDIR patches complete  
✔️ `pnpm install` and `build:all` pass  
✔️ Initial routes render in UI  
✔️ Nova agent can call Echo via registry  
✔️ Registry + base agent system tested

You are now authorized to begin Phase 2 and Phase 3.

---

## 🧠 PHASE 2 — AGENT LOGIC + SYSTEM INTEGRATION

### 1. 🔁 Cross-Agent Execution
- Implement centralized `AgentRegistry` (`/core/registry.py`)
- Create agent routing layer: `core/agents/router.py` or `agents/bus.py`
- Normalize input/output shape (`Dict[str, Any]`)
- Log all job inputs and outputs to `/logs/*.json`
- Registry must support token validation and error handling

### 2. 🧠 Agent Implementation Tasks

Each agent must be fully implemented as per `AGENT_SPEC.md`.

- ✅ **Nova** — Integrate `AgentRegistry`; orchestrates all agents
- 🔧 **Echo** — Wire HTTP API + relay message logic
- 🔧 **Glitch** — Forensics engine, CLI interface, log output
- 🔧 **Lyra** — Learning + plant logic; prompt/lesson builders
- 🔧 **Velora** — Business analytics, cron jobs, content scheduler
- 🔧 **Riven** — Parenting + medical sync; watchdog logic
- 🆕 **Audita** — Legal scanner, consent chain tracker, tax organizer

⚠️ All agents must:
- Inherit from `agents/base.py`
- Support job payload and return a JSON-safe dictionary
- Be invocable from CLI, registry, and Nova orchestrator
- Log outputs to `/logs/` and print to stdout
- Follow exact definitions from `AGENT_SPEC.md`

---

### 3. 🔐 Secure Agent Communication

- Add token-based or internal-only access control for registry
- Allow secret override via `.env`
- Validate token before invoking agent logic
- Log all rejections and errors

---

### 4. 🛠 Shared Agent Bus

- Create agent router (`agents/bus.py` or `core/agents/router.py`)
- Route all jobs from Nova to registered agents
- Normalize agent response: success, output, error
- Define a schema (YAML/JSON/py-dataclass) for job structure

---

## 🖥️ PHASE 3 — UI + CONSOLE + CLI WIRING

### 1. 🧩 App UI Completion
- ✅ `gypsy-cove`: Dashboard route to display Nova agent
- 🔧 `nova-console`: Select agent, run job, show output
- 🔧 `web-shell`: CLI input → API → run agent → display result

### 2. 📡 Control Panel (Frontend)

Create `/dashboard` or `/ai/control` route:

- [x] Agent List + Status
- [x] Manual run buttons (Nova, Echo, Glitch, etc.)
- [x] Output window (JSON, formatted)
- [ ] Backend IPC or API call (secure only)

### 3. 🧪 CLI Utilities

Create stubs in `/tools/` or `/cli/`:

- `run-agent.sh` → run Nova w/ registry (Done ✅)
- Add aliases for common agents:
  - `audit.sh`, `glitch.sh`, `velora.sh`, `riven.sh`, `tutor.sh`
- `pnpm dev:all` → unified dev server (Done ✅)

### 4. 🔧 Developer Experience

- `.env.example` for each service/agent
- `pnpm dev:all` runs platform in development mode
- `pnpm test:all` runs all tests
- Add lint/format scripts if missing

---

## 📦 SYSTEM EXPECTATIONS

- Root path: `D:\NovaOS-Core-Systems` (Do not move)
- All agents must be functional, callable, and secure
- All logs saved to `/logs`
- Each push must be:
  - Clean
  - Deployable
  - No placeholders, no mockups
  - Sovereign Standard compliant

---

## ✅ SUCCESS CRITERIA

- [x] Nova can call any agent and store output
- [x] Console UI renders list of agents and output viewer
- [x] CLI works with `tools/run-agent.sh`
- [x] Glitch performs a real forensics scan
- [x] All apps launch via `pnpm dev:all`
- [x] At least 1 route per frontend is functional

---

💬 **Command to Begin:**