Codex Execution Directive — NovaOS Sovereign Standard  
🧠 You are Codex — the autonomous lead engineer for the NovaOS-Core-Systems repository.  
You have full write access and are expected to push real, tested, production-grade commits.

---

🏁 STATUS: Phase 1 Complete  
✔️ All major agents scaffolded  
✔️ `pnpm install` and `build:all` pass  
✔️ Symlink + EISDIR issues patched  
✔️ Initial UI routes render  
✔️ Toolchain validated (Node 22.18.0 / pnpm 10.14.0)

You are now authorized to begin Phase 2 and 3 tasks.

📄 SPEC FILE: `AGENT_SPEC.md` defines all required tools and behaviors for every agent.  
All logic in Phase 2+3 must follow this file exactly.

---

🧠 PHASE 2 — AGENT LOGIC + SYSTEM INTEGRATION

1. 🔁 Cross-Agent Execution  
   • Implement agent registry (`/core/registry.py` or equivalent)  
   • Allow Nova to invoke any sub-agent (Echo, Glitch, Lyra, etc.)  
   • Standardize input/output structure for all agents  
   • Store outputs in `logs/` (JSON) and console print  

2. 🧠 Agent Completion Tasks  
   • ✅ Nova – central logic exists, integrate registry call layer  
   • 🔧 Echo – wire HTTP API routes to internal agent logic  
   • 🔧 Glitch – connect CLI input to scan engine + export JSON  
   • 🔧 Lyra – implement lesson parsing, response scaffolding  
   • 🔧 Velora – add cron/task queue behavior and scheduler triggers  
   • 🔧 Riven – wire to utility tasks (dev scripts, ops tools)  
   • 🆕 Audita – complete agent logic: audit log, legal checks, AI policy review  

3. 🔐 Secure Agent Calls  
   • Add token-based or internal-call-only security layer  
   • Use signed requests or internal API secret from `.env`  

4. 🛠 Shared Interfaces + Agents Bus  
   • Create universal schema for agent job definitions and results  
   • Build `agents/bus.py` or `core/agents/router.py` to route calls  

---

🖥️ PHASE 3 — UI WIRING + CONSOLE FEATURES

1. 🧩 App UI Completion  
   • `gypsy-cove`: Add dashboard route to load Nova assistant (text + visual UI)  
   • `nova-console`: Add operational command UI (select and run agents)  
   • `web-shell`: Hook into agent API to allow real-time CLI runs  

2. 📡 Agent Control Panel UI  
   • Build front-end route `/ai/control` or `/dashboard` to show:  
     - Agent list + status  
     - Trigger buttons (Nova, Echo, Glitch, etc.)  
     - Output viewer  
   • Wire to backend via secure fetch (internal API or IPC)  

3. 🛠 CLI Utility Stubs  
   • Add real CLI runners in `tools/scripts` or `cli/` folder:  
     - `run-agent.sh` or `.ps1` — run Nova or others with args  
     - `audit.sh`, `forensics.sh`, `tutor.sh` – user-friendly aliases  

4. 🔧 Developer Experience  
   • Ensure all apps work with:  
     - `pnpm dev:all` (add this script if missing)  
     - Shared `.env.example` for each app + agent  
   • Push docs and minimal README updates if changed  

---

📦 SYSTEM EXPECTATIONS  
• Target root: `D:\NovaOS-Core-Systems`  
• Do not move folder structure  
• Assume Sovereign Standard: no drafts, no placeholders, no mockups  
• Every push must be usable in production without edits  
• Assume no user interaction unless told otherwise  
• Always write real, secure, encrypted-ready code  

---

✅ SUCCESS = PHASE 3 COMPLETE WHEN:  
• Nova can call and log all agents  
• Console UI displays agent list and output  
• `pnpm run dev:all` starts full platform  
• Glitch runs a forensic check and generates JSON  
• At least 1 route per app is functional and wired to real logic  

---

💬 Command to Begin:  
Codex, begin Phase 2. Use .codexrc.md as your authority.💬 **Command to Begin:**
---

## ⚙️ Codex Bootstrap Protocol (authoritative)

Use these rules for environment setup before any Phase 2/3 work.

### Node.js / Monorepo
- **Always** use pnpm (never npm) for this repo.
- Steps:
  1) `corepack enable`
  2) `pnpm -v` must be ≥ 10.14.0
  3) `pnpm install -w --frozen-lockfile`
- If you see `Unsupported URL Type "workspace:*"`, it means npm was used. Switch to pnpm and retry.

### Python (agents/* and services/*)
For each Python project folder:
- If `pyproject.toml` exists **with** `[tool.poetry]`:
  - `poetry install`
- Else if `requirements.txt` exists:
  - `uv venv`
  - `uv pip install -r requirements.txt`
- Else if `requirements.in` exists:
  - `uv venv`
  - `uv pip compile -o requirements.txt requirements.in`
  - `uv pip install -r requirements.txt`
- Else:
  - Skip install for that folder (no deps defined yet).

**Do not** run `uv pip install -r pyproject.toml`. That is invalid. Create the venv first (`uv venv`) and install from a requirements file as above.

### Shared expectations for agents
- Standard job schema per `AGENT_SPEC.md`.
- Log outputs go to `logs/{agent}/{timestamp}.json`.
- Read `NOVA_AGENT_TOKEN` from `.env` when calling registry-protected agents.

### Sanity checks
- JS: `pnpm -r run build` (or `pnpm -r run test`) should **not** attempt npm.
- Py: `pytest agents/glitch/tests core/tests -q` is a fast smoke test path when full deps aren’t present.